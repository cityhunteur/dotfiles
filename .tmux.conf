# No bells at all
set -g bell-action none

# Change the prefix key to C-a
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# macOS clipboard support
bind-key -T copy-mode-vi v send -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "pbcopy"
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "pbcopy"

# Turn the mouse on with copy mode support
set -g mouse on
setw -g mode-keys vi

set -g @continuum-restore 'on'

# Plugins (load before custom status to let tpm work, but override status after)
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-copycat'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-open'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-sessionist'
set -g @plugin 'tmux-plugins/tmux-sidebar'
set -g @plugin 'tmux-plugins/tmux-pain-control'
set -g @plugin 'tmux-plugins/tmux-logging'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
run -b '~/.tmux/plugins/tpm/tpm'

# =============================================================================
# Nord Status Bar (adapts to terminal light/dark via named colors)
# =============================================================================
# Uses terminal color names so it follows the Ghostty Nord/Nord Light theme.
# Terminal color mapping (Nord):
#   black = Polar Night 1, brightblack = Polar Night 4
#   white = Snow Storm 2,  brightwhite = Snow Storm 3
#   blue  = Frost 3,       brightblue  = Frost 4
#   cyan  = Frost 2,       brightcyan  = Frost 1
#   green = Aurora green,   yellow = Aurora yellow, red = Aurora red

set -g status on
set -g status-interval 1
set -g status-justify left
set -g status-style "bg=default,fg=white"

set -g status-left-length 60
set -g status-right-length 80

# Left: session name — mirrors starship ⟪ ⟫ delimiters
set -g status-left "#[fg=brightblack]┌ #[fg=blue,bold]⟪ #S ⟫#[fg=brightblack,nobold]  "

# Right: host and time
set -g status-right "#[fg=brightblack]─── #[fg=cyan]⟨ #H ⟩ #[fg=default]⟨ %H:%M ⟩"

# Inactive windows
set -g window-status-format "#[fg=brightblack] ─ #[fg=white]#I #W "
set -g window-status-separator ""

# Active window
set -g window-status-current-format "#[fg=brightblack] ─ #[fg=cyan,bold]#I #[fg=black,bold]#W "

# Pane borders
set -g pane-border-style "fg=black"
set -g pane-active-border-style "fg=cyan"
set -g display-panes-colour "black"
set -g display-panes-active-colour "cyan"

# Messages
set -g message-style "bg=black,fg=cyan"
set -g message-command-style "bg=black,fg=cyan"

# Clock
setw -g clock-mode-colour "cyan"

# Prefix highlight
set -g @prefix_highlight_fg "default"
set -g @prefix_highlight_bg "cyan"

# Cursor shape passthrough (default to bar cursor)
set -ga terminal-overrides ',*:Ss=\E[%p1%d q:Se=\E[6 q'
set -ga terminal-overrides ',xterm-256color:Tc'
