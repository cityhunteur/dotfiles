# No bells at all
set -g bell-action none

# Change the prefix key to C-a
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# macOS clipboard support
bind-key -T copy-mode-vi v send -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "pbcopy"
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "pbcopy"

# Turn the mouse on with copy mode support
set -g mouse on
setw -g mode-keys vi

set -g @continuum-restore 'on'

# Plugins (load before custom status to let tpm work, but override status after)
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-copycat'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-open'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-sessionist'
set -g @plugin 'tmux-plugins/tmux-sidebar'
set -g @plugin 'tmux-plugins/tmux-pain-control'
set -g @plugin 'tmux-plugins/tmux-logging'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
run -b '~/.tmux/plugins/tpm/tpm'

# =============================================================================
# Futuristic Nord Status Bar
# =============================================================================
# Nord palette mapped to tmux terminal colors:
#   black = #2E3440, brightblack = #4C566A
#   white = #D8DEE9, cyan = #88C0D0, brightcyan = #8FBCBB
#   blue = #81A1C1, brightblue = #5E81AC
#   green = #A3BE8C, yellow = #EBCB8B, red = #BF616A

set -g status on
set -g status-interval 1
set -g status-justify left
set -g status-style "bg=#2E3440,fg=#D8DEE9"

set -g status-left-length 60
set -g status-right-length 80

# Left: session name in brackets
set -g status-left "#[fg=#4C566A]┌ #[fg=#81A1C1,bold]⟪ #S ⟫#[fg=#4C566A,nobold]  "

# Right: host and date
set -g status-right "#[fg=#3B4252]─── #[fg=#88C0D0]⟨ #H ⟩ #[fg=#D8DEE9]⟨ %H:%M ⟩"

# Inactive windows
set -g window-status-format "#[fg=#3B4252] ─ #[fg=#4C566A]#I #[fg=#4C566A]#W "
set -g window-status-separator ""

# Active window
set -g window-status-current-format "#[fg=#3B4252] ─ #[fg=#88C0D0,bold]#I #[fg=#D8DEE9,bold]#W "

# Pane borders
set -g pane-border-style "fg=#3B4252"
set -g pane-active-border-style "fg=#88C0D0"
set -g display-panes-colour "#3B4252"
set -g display-panes-active-colour "#88C0D0"

# Messages
set -g message-style "bg=#3B4252,fg=#88C0D0"
set -g message-command-style "bg=#3B4252,fg=#88C0D0"

# Clock
setw -g clock-mode-colour "#88C0D0"

# Prefix highlight
set -g @prefix_highlight_fg "#2E3440"
set -g @prefix_highlight_bg "#88C0D0"

# Cursor shape passthrough (default to bar cursor)
set -ga terminal-overrides ',*:Ss=\E[%p1%d q:Se=\E[6 q'
set -ga terminal-overrides ',xterm-256color:Tc'
